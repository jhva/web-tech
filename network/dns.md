# DNS (도메인 이름 시스템)
DNS는 www.naver.com, www.google.com 등 이러한 것을 도메인 이라 부르는데 도메인 주소와 IP주소를 매핑시켜놓은 DNS 서버에 전달되어, 해당 도메인의 IP가 존재하는지 쿼리를 보내고 IP가 확인된 이후  IP 주소로 패킷을 보낸다. 

DNS는 상위 기관에서 부터 인증된 기관에 도메인을 생성하고 <b>계층구조 이면서 분산 데이터베이스 구조를 가진다</b>

DNS가 작동하는 방식을 알아보자 


# 도메인 구조 
> https://www.naver.com www는 호스트, naver 도메인명,.com 최상위 도메인
> 그리고 이 모든것을 조합한것이 URL이라 부른다. 
> 

도메인은 `최상위 도메인`,`차상위 도메인`,`도메인 이름` 으로 크게 나누어져있다. 


### 최상위 도메인 (TLD)
- 최상위 도메인은 도메인 레벨중 가장 높은 단계에 있는 도메인이며 도메인의 목적,종류,국가이다. (.com,.net,그 외)
- 전세계 13대가 구축되어 있음

### 차상위 도메인 (SLD, 호스트,서브도메인)
- 호스트,서브 도메인으로 불리면서 , IP주소나 디렉토리로 포워딩되는 도메인 이름의 확장자 (www,dev. m.)


### 도메인 이름 
- 사용자에게 보다 쉽게 기억될 수 있도록 지정해주는 단계(naver,daum)


### 루트 도메인 서버 
- TLD, DNS 서버 IP 들을 저장해두고 안내하는 역할 
# DNS 동작과정
1. 웹 브라우저에서 www.naver.com 을 입력했을때 맨 처음에 Local DNS ipconfig or ifconfig 를 쳤을대 나오는 DNS 서버 IP 주소에게 www.naver.com이라는 호스트 네임을 물어본다.
2. 만약 있을경우 바로 Local DNS가 PC에 IP주소를 주고 끝나고, 없을경우엔 Local DNS는 www.naver.com 에 대한 IP 주소를 찾아내기 위해 DNS 서버들과 통신한다고합니다. (Root DNS,TLD SLD 순서)<br/>
   2. 만약 이전에 검색하여, 캐시가 되어있다면 브라우저는 IP주소를 갖고 있는 호스팅 서버에게 웹사이트를 출력 요청을하게되면서 웹 사이트에게 보여진다.
3. 맨 먼저 Root DNS 와 통신하면서 IP 주소를 물어봅니다. 모를 경우 TLD 도메인 서버에게 요청을합니다 .
4. TLD 서버에서도 모른다고 할경우, 도메인을 관리하는 SLD 서버에게 물어봅니다.

위 전 과정을 DNS 서버를 차례대로 재귀적으로 물어보게되는데 이 과정을 `Recursive Query` 라고 부릅니다  

### Recursive DNS Server
위 같은 동작과정(Recursive Query)을 매번 하게되면 매우 효율이 안좋으며, 한번 거친 이후엔 데이터를 일정기간 (TTL/Time to Live) 동안 캐시를 저장해두는 서버입니다. 

