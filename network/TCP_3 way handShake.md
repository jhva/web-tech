# TCP (Transmission Control Protocol) /IP ? 
TCP는 서버와 클라이언트간 데이터(패킷)을 신뢰성 있게 전달하기 위해 만들어졌으며
패킷안에 기록된 IP 주소를 통해 각기 다른 경로로 전송 될 수 있다. 

## 패킷
간단하게 설명하면 인터넷상에서 데이터를 주고받을때, 데이터는 잘개 쪼개서 `패킷`으로 전달 됩니다. 
패킷은 잘개쪼개진 데이터 블록이고 단순 데이터라하면, 작은데이터 이거나 큰데이터로 추정되는데요,<br/> 이때 만일 큰데이터가 오갈경우 전송이 끝날 때까지 기다리게되는데,이런 방식은 비효율을 낳습니다.<br/>
이러한 근거로 패킷은 여러개로 쪼개서 데이터를 전송하면서 나눠서 온 패킷들을 결합하여 본래의 데이터를 완성 시키고 데이터를 전달합니다. 


### TCP의 특징 
- 높은 신뢰성
- 흐름제어
- 혼잡제어 가능, 네트워크 속도 조절
- 가상 회선 방식 제공 
- 3-way handshaking 과정 이후 4-way handshaking 과정을 통해 통신 해제


## TCP 3 Way HandShake
 서버와 클라이언트가 연결되어 데이터를 주고받는 과정이며 이때 데이터가 안전하게 전달되려면 정확하게 상대방과의 세션을 수립하는 과정이 필요하고, 이 과정 속에서 `SYN`,`ACK` 을 통해 TCP 3 way HandShake 과정이 이루어진다. 



1. 클라이언트는 서버에 접속을 시도할때 SYN 패킷을 보낸다
   1. 클라이언트는 `SYN_SENT` 상태가 됨 
2. 서버의 포트가 열려있고 요청이 왔을때 클라이언트의 요청을 수락하면서 패킷을 받고 ACK 과 SYN flag가 설정된 패킷을 보냄
   2. 서버는 `SYN_RECEIVED` 상태가 됨 
3. 클라이언트는 서버에게 ACK을 보내면서 연결이 이루어지고 데이터가 오갈수 있게 되는것. 
    3. 서버의 상태는 `ESTABLISHED`
---

### SYN (연결 요청 플래그)
SYN 는 연결이 이루어질수있도록 요청 의미
### ACK
ACK은 요청을 확인했다는 응답을 뜻함 .


## TCP 4 Way HandShake
TCP 4 Way HandShake 는 연결된 세션을 종료하기 위해 수행되는 절차이고, `FIN`플래그를 통해 이루어진다 

1. 클라이언트가 먼저 연결을 종료하기위해서 `FIN` 플래그 전송 
   1. 클라이언트는 이때 `FIN_WAIT1` 상태가됨 
2. 서버가 클라이언트로부터 FIN 받은 이후 ACK을 보냄 
   2. `CLOSE_WAIT`상태가 이루어짐 
3. 서버의 통신이 끝나면 클라이언트에게 `FIN`플래그를 전송함
   3. `LAST_WAIT` 상태가 됨 
4. 클라이언트는 확인 패킷 `ACK`을 보내고 `TIME WAIT`상태 변경 
    4. 번거롭게 이러한 과정을 거쳐야하는 이유는 한 번에 연결이 해제가된다면 아직 서버에 도착하지 못한 패킷이 존재 할 수 있기때문에, 패킷이 유실되는 것을 방지하기 위해 `TIME_WAIT`이라는 상태가 주어지며 대게 (1~4분)정도 대기한다

